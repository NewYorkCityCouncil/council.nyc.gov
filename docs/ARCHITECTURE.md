# Architecture

This package contains the themes and plugins for a WordPress multisite installation. Only the themes and plugins are included. All WordPress core files are ignored.

## Required Skills

To work on all aspects of this package, developers will need the following code skills:
* [WordPress](https://wordpress.org/)
    * [PHP](http://php.net/)
    * [MySQL](http://mysql.com/)
* [Git](https://git-scm.com/)/[GitHub](https://github.com/)
* [HTML5](https://www.w3.org/TR/html5/)
* [Sass](http://sass-lang.com/)
* JavaScript
    * [jQuery](https://jquery.com/)
    * [Leaflet](http://leafletjs.com/)
* [Mapbox](https://www.mapbox.com/)
* [Foundation for Sites](http://foundation.zurb.com/sites.html)
* [NPM](https://www.npmjs.com/)
* [Bower](https://bower.io/)
* [Gulp](http://gulpjs.com/)

## Local Installation

To run this locally, you will need to clone this repository and manually install WordPress in the same directory. Be careful not to overwrite any files. Note: This package is meant to be used with a WordPress [network](https://codex.wordpress.org/Create_A_Network).

## WordPress Multisite

The NYC Council site is a [network](https://codex.wordpress.org/Create_A_Network) of sites. The primary site is for basic Council pages—such as the home page, the About page, and the Initiative page. Each of the 51 Council Districts and each Council Division (Legislation, Budget, Land Use, Press) is its own site.

## Themes

There are several themes included in this package. The primary site should use the `wp-nycc` theme. All other themes are [child themes](https://codex.wordpress.org/Child_Themes) of the `wp-nycc` parent theme. Each District site should use the `wp-nycc-district` child theme. And each Division site should use its specific `wp-nycc-[division]` child theme.

## Foundation for Sites

The New York City Council website uses [Foundation for Sites](http://foundation.zurb.com/sites/docs/), a responsive and accessible front-end framework. The `wp-nycc` theme is based on [andycochran/wp-foundation-sites](https://github.com/andycochran/wp-foundation-sites), a bare-bones WordPress theme built with Foundation.

### Editing Themes

* `cd wp-nycc/`
* Run `npm install` to get `node_modules`
* Run `bower install` to get `bower_components`
* Run `gulp` to compile the CSS & JavaScript
* Run `gulp watch` to watch for changes to `.sass` and `.js` files

### Styles

The styles for all themes are in the `wp-nycc` parent theme. The child themes do not include any styles.

* **Do not** edit the files in `wp-nycc/assets/css/`—they're generated by Gulp
* Add your custom styles to `wp-nycc/assets/scss/app.scss`
* Change the Foundation variables in `wp-nycc/assets/scss/_settings.scss`
* Choose which Foundation component styles you want in `wp-nycc/assets/scss/foundation.scss`

### JavaScript

The scripts for all themes are in the `wp-nycc` parent theme. The child themes do not include any JavaScript.

* **Do not** edit the files in `wp-nycc/assets/js/`—they're generated by Gulp
* Add/edit your custom JavaScript files in `wp-nycc/assets/js/scripts/`
* All .js files in `wp-nycc/assets/js/scripts/` will concatenate to `wp-nycc/assets/js/scripts.js` and `wp-nycc/assets/js/scripts.min.js`
* Choose which Foundation JavaScript components you want in `wp-nycc/gulpfile.js`

_Note: The `wp-nycc/map_scripts.php` and `wp-nycc-district/pb-map-scripts.php` files contain dynamic JavaScript that is inserted directly into the footer._

### Upgrading

When upgrading to a newer version of Foundation, make sure `wp-nycc/assets/scss/_settings.scss` uses `@import '../../bower_components/foundation-sites/scss/util/util';` not `@import 'util/util';`.
